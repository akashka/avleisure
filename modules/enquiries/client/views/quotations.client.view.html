<section>
    <div class="page-header">
        <div class="row">
            <div class="col-md-6">
                <h1>Quotations</h1>
            </div>
            <div class="col-md-4" style="float: right; margin-top: 2em">
                <a class="btn btn-primary" ui-sref="enquiries.list()">
            <i class="glyphicon glyphicon-check"> LIST ENQUIRIES</i>
          </a>
            </div>
        </div>
    </div>

    <div class="row" ng-hide="vm.isSearched">
        <div class="col-sm-4 col-md-5">
            <div class="form-group">
                <label for="enquiry_id" class="col-sm-5 control-label">Enquiry Id:</label>
                <div class="col-sm-7">
                    <input id="enquiry_id" type="text" class="form-control" ng-model="vm.search.enquiry_id" placeholder="Enter Enquiry Id" />
                </div>
            </div>
        </div>
        <div class="col-sm-4 col-md-5">
            <div class="form-group">
                <label for="school_name" class="col-sm-5 control-label">School Name:</label>
                <div class="col-sm-7">
                    <input id="school_name" type="text" class="form-control" ng-model="vm.search.school_name" placeholder="Enter School Name"
                    />
                </div>
            </div>
        </div>
        <div class="page-controls col-sm-2" style="text-align: center;">
            <div class="row" role="toolbar">
                <button type="button" class="btn btn-default" ng-click="vm.searches()">Search</button>
            </div>
        </div>
    </div>
    <hr ng-hide="vm.isSearched">

    <div class="col-md-12" ng-show="vm.isSearched">
        <form name="vm.form.itineryForm" novalidate>
            <fieldset>

                <div class="form-group col-md-12" ng-repeat="enq in vm.enquiry.enquiries track by $index">

                    <div class="row" style="margin-bottom:25px;">
                        <div class="row col-md-6">
                            <span style="overflow-y: scroll; max-height:530px; zoom:0.5; display: -webkit-box; -webkit-line-clamp: 10; -webkit-box-orient: vertical; background: #bababa;"
                                ng-bind-html="vm.findItinery(enq.itineries).description"></span>
                        </div>
                        <div class="row col-md-6">
                            <!-- Details -->
                            <div id="Details" class="tab-pane fade in" ng-class="{active:isSet(1)}">
                                <div class="col-md-12 card" style="zoom:0.8;max-height:500px;background:#bababa;">
                                    <div class="col-md-6">
                                        <b>Itinery: </b> {{vm.findItinery(enq.itineries).title}}
                                        <br><br>
                                        <b>Plan: </b> {{enq.plan}}
                                        <br><br>
                                        <b>Package Type: </b> {{enq.package_type}}
                                        <br><br>
                                        <b>Class: </b> {{enq.school_class}}
                                        <br><br>
                                        <b>No Of Students: </b> {{enq.no_of_students}}
                                        <br><br>
                                        <b>No Of Teachers: </b> {{enq.no_of_teachers}}
                                        <br><br>
                                        <b>Sharing: </b>
                                        <span ng-repeat="sh in enq.sharing"> {{sh}},  </span>
                                        <br><br>
                                        <b>Remarks: </b> {{enq.remarks}}
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group col-md-12">
                                            <label class="control-label" for="school_name">School Name: {{vm.enquiry.school_name}}</label>
                                        </div>
                                        <div class="form-group col-md-12">
                                            <label class="control-label" for="school_email_id">Email ID: {{vm.enquiry.school_email_id}}</label>
                                        </div>
                                        <div class="form-group col-md-12">
                                            <label class="control-label" for="school_phone_no">Phone No: {{vm.enquiry.school_phone_no}}</label>
                                        </div>
                                        <div class="form-group col-md-12">
                                            <label class="control-label" for="school_contact_person">Contact Person: {{vm.enquiry.school_contact_person}}</label>
                                        </div>
                                        <div class="form-group col-md-12">
                                            <label class="control-label" for="enquired_by">Enquired By: 
                                                <span ng-repeat="enq in vm.enquiry.enquiry_by"> {{enq.displayName}},  </span>
                                            </label>
                                        </div>
                                        <div class="form-group col-md-12">
                                            <label class="control-label" for="alternate_email_id">Alternate Email: {{vm.enquiry.alternate_email_id}}</label>
                                        </div>
                                        <div class="form-group col-md-12">
                                            <label class="control-label" for="school_phone_no">Alternate Phone: {{vm.enquiry.alternate_phone_no}}</label>
                                        </div>
                                        <div class="form-group col-md-12">
                                            <label class="control-label" for="school_address">Address: {{vm.enquiry.school_address}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-content row">

                        <!-- New Quotation  -->
                        <div id="New" class="tab-pane fade in active col-md-6 row">
                            <div class="col-md-12 card table_rows_set">

                                <div classs="row">
                                    <div class="col-md-12">
                                        <h4> NEW QUOTATION </h4>
                                    </div>
                                    <div class="col-md-12">
                                        <hr style="color: #dd1111;border-top: 2px solid black;margin-top: 0;"/>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label class="control-label" for="total_total">Total amount: </label>
                                        <input name="total_total" type="text" ng-model="enq.quotations[0].total_total" id="total_total" class="form-control" placeholder="Total Amount">
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label class="control-label" for="total_student">Amount Per Student: </label>
                                        <input name="total_total" type="text" ng-model="enq.quotations[0].total_student" id="total_student" class="form-control" placeholder="Price Per Student">
                                    </div>
                                    <div class="form-group col-md-12" show-errors>
                                        <label class="control-label" for="transport_others">Remarks: </label>
                                        <textarea rows="6" type="text" id="transport_others" name="transport_others" class="form-control" ng-model="enq.quotations[0].remarks" placeholder="Remarks"></textarea>
                                    </div>
                                </div>

                                <br>
                                <div class="form-group col-md-12" style="margin-top:10px;text-align:center;">
                                    <button class="btn btn-success" ng-click="vm.save()">SAVE</button>
                                </div>

                            </div>
                        </div>

                        <!-- Existing Quotation  -->
                        <div id="Existing" class="tab-pane fade in col-md-6 active row">
                            <div class="col-md-12 card table_rows_set">
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-4">Date of Quotation</div>
                                        <div class="col-md-4">Total Amount</div>
                                        <div class="col-md-4">Amount / Student</div>
                                    </div>
                                </div>
                                <div class="col-md-12" style="overflow-x: scroll;padding: 0;float: left;display: flex;">
                                    <div class="row col-md-12" ng-repeat="quot in enq.quotations" ng-show="$index != 0">
                                        <div class="col-md-4">
                                            {{quot.createdon| date:'dd/MMM/yyyy'}}
                                        </div>
                                        <div class="col-md-4">
                                            Rs. {{quot.total_total}}
                                        </div>
                                        <div class="col-md-4">
                                            Rs. {{quot.total_student}}                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

            </fieldset>
        </form>
    </div>

</section>

<style>
    .table_rows_set .row {
        font-size: 16px;
        line-height: 2.128571;
        color: #333;
        border-bottom: 2px solid grey;
    }
</style>